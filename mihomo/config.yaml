# ä»£ç†é›†åˆï¼ˆè·å–æœºåœºè®¢é˜…é“¾æ¥å†…çš„æ‰€æœ‰èŠ‚ç‚¹ï¼‰
proxy-providers:
  airport:
    type: http
    url: ""
    path: ./proxies/airport.yaml
    interval: 3600
    proxy: DIRECT
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 180
      timeout: 5000

# å…¨å±€è®¾ç½®
mixed-port: 7890
allow-lan: true
mode: rule
log-level: info
ipv6: true
keep-alive-interval: 15
keep-alive-idle: 15
find-process-mode: off
external-controller: 0.0.0.0:9090
secret: 
external-ui: ui
external-ui-name: yacd
external-ui-url: https://mirror.ghproxy.com/https://github.com/MetaCubeX/yacd/archive/gh-pages.zip
profile:
  store-selected: true
  store-fake-ip: true
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome
global-ua: clash.meta

# åŸŸåå—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

# tun æ¨¡å¼
tun:
  enable: true
  stack: system
  auto-route: true
  auto-redirect: false
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53
  device: mihomo
  strict-route: true
  
# dns è®¾ç½®
dns:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:53
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - '+.lan'
    - '+.local'
  nameserver-policy:
    'rule-set:private_direct,domestic_non_ip,direct_non_ip,lan_non_ip':
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
  nameserver:
    - https://8.8.8.8/dns-query
    - https://1.1.1.1/dns-query

# ç­–ç•¥ç»„
proxy-groups:
  - {name: ä»£ç†, type: fallback, proxies: [é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, éŸ©å›½, ç‹®åŸ, ç¾å›½, ç½—æ–¯, å¾·å›½, æ‹¿å¤§, æ¾³å¤§], url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000}
  - {name: ç§ä»£, type: fallback, proxies: [å°æ¹¾, æ—¥æœ¬, éŸ©å›½, ç‹®åŸ, ç¾å›½, ç½—æ–¯, å¾·å›½, æ‹¿å¤§, æ¾³å¤§, é¦™æ¸¯], url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000}
  - {name: é™æ€, type: fallback, proxies: [æ—¥æœ¬, éŸ©å›½, ç‹®åŸ, ç¾å›½, ç½—æ–¯, å¾·å›½, æ‹¿å¤§, æ¾³å¤§, é¦™æ¸¯, å°æ¹¾], url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000}
  - {name: æµ‹é€Ÿ, type: fallback, proxies: [éŸ©å›½, ç‹®åŸ, ç¾å›½, ç½—æ–¯, å¾·å›½, æ‹¿å¤§, æ¾³å¤§, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬], url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000}
  - {name: ç”µæŠ¥, type: fallback, proxies: [ç‹®åŸ, ç¾å›½, ç½—æ–¯, å¾·å›½, æ‹¿å¤§, æ¾³å¤§, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, éŸ©å›½], url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000}
  - {name: æ™ºèƒ½, type: fallback, proxies: [ç¾å›½, ç½—æ–¯, å¾·å›½, æ‹¿å¤§, æ¾³å¤§, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, éŸ©å›½, ç‹®åŸ], url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000}
  - {name: æµ·å¤–, type: fallback, proxies: [ç½—æ–¯, å¾·å›½, æ‹¿å¤§, æ¾³å¤§, é¦™æ¸¯, å°æ¹¾, æ—¥æœ¬, éŸ©å›½, ç‹®åŸ, ç¾å›½], url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000}
  - {name: åŒ—ç¾, type: select, proxies: [æ‹¿å¤§]}
  - {name: æ¬§æ´², type: select, proxies: [å¾·å›½]}
  - {name: æ—¥åª’, type: select, proxies: [æ—¥æœ¬]}
  - {name: éŸ©åª’, type: select, proxies: [éŸ©å›½]}
  - {name: æ¸¯åª’, type: select, proxies: [é¦™æ¸¯]}
  - {name: å°åª’, type: select, proxies: [å°æ¹¾]}
  - {name: è‹¹æœ, type: select, proxies: [DIRECT, ä»£ç†]}
  - {name: ä¸‹è½½, type: select, proxies: [DIRECT, ä»£ç†]}
  - {name: å¾®è½¯, type: select, proxies: [DIRECT, ä»£ç†]}
  - {name: ç§ç›´, type: select, proxies: [DIRECT, ä»£ç†]}
  - {name: å›½å†…, type: select, proxies: [DIRECT, ä»£ç†]}
  - {name: ç§å­, type: select, proxies: [DIRECT, ä»£ç†]}
  - {name: å†…ç½‘, type: select, proxies: [DIRECT, ä»£ç†]}
  - {name: æ¼ç½‘, type: fallback, proxies: [ä»£ç†]}
  # å›½å®¶æˆ–åœ°åŒºç­–ç•¥ç»„
  - {name: é¦™æ¸¯, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡­ğŸ‡°"}
  - {name: å°æ¹¾, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡¹ğŸ‡¼"}
  - {name: æ—¥æœ¬, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡¯ğŸ‡µ"}
  - {name: éŸ©å›½, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡°ğŸ‡·"}
  - {name: ç‹®åŸ, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡¸ğŸ‡¬"}
  - {name: ç¾å›½, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡ºğŸ‡¸"}
  - {name: ç½—æ–¯, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡·ğŸ‡º"}
  - {name: å¾·å›½, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡©ğŸ‡ª"}
  - {name: æ‹¿å¤§, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡¨ğŸ‡¦"}
  - {name: æ¾³å¤§, type: url-test, url: 'https://www.gstatic.com/generate_204', interval: 180, timeout: 5000, include-all: true, filter: "ğŸ‡¦ğŸ‡º"}

# åˆ†æµè§„åˆ™
rules:
  # è‡ªå®šä¹‰
  - RULE-SET,private_proxy,ç§ä»£
  - RULE-SET,private_direct,ç§ç›´
  # domain ç±»è§„åˆ™
  - RULE-SET,speedtest,æµ‹é€Ÿ
  - RULE-SET,cdn_domainset,é™æ€
  - RULE-SET,cdn_non_ip,é™æ€
  - RULE-SET,stream_us_non_ip,åŒ—ç¾
  - RULE-SET,stream_eu_non_ip,æ¬§æ´²
  - RULE-SET,stream_jp_non_ip,æ—¥åª’
  - RULE-SET,stream_kr_non_ip,éŸ©åª’
  - RULE-SET,stream_hk_non_ip,æ¸¯åª’
  - RULE-SET,stream_tw_non_ip,å°åª’
  - RULE-SET,ai_non_ip,æ™ºèƒ½
  - RULE-SET,telegram_non_ip,ç”µæŠ¥
  - RULE-SET,apple_cdn,è‹¹æœ
  - RULE-SET,apple_services,è‹¹æœ
  - RULE-SET,apple_cn_non_ip,ä»£ç†
  - RULE-SET,download_domainset,ä¸‹è½½
  - RULE-SET,download_non_ip,ä¸‹è½½
  - RULE-SET,microsoft_cdn_non_ip,å¾®è½¯
  - RULE-SET,microsoft_non_ip,ä»£ç†
  - RULE-SET,global_non_ip,æµ·å¤–
  - RULE-SET,domestic_non_ip,å›½å†…
  - RULE-SET,direct_non_ip,ç§å­
  - RULE-SET,lan_non_ip,å†…ç½‘
  # IP ç±»è§„åˆ™
  - RULE-SET,telegram_ip,ç”µæŠ¥
  - RULE-SET,stream_us_ip,åŒ—ç¾
  - RULE-SET,stream_eu_ip,æ¬§æ´²
  - RULE-SET,stream_jp_ip,æ—¥åª’
  - RULE-SET,stream_kr_ip,éŸ©åª’
  - RULE-SET,stream_hk_ip,æ¸¯åª’
  - RULE-SET,stream_tw_ip,å°åª’
  - RULE-SET,lan_ip,å†…ç½‘
  - RULE-SET,domestic_ip,å›½å†…
  - RULE-SET,china_ip,å›½å†…
  - RULE-SET,china_ipv6,å›½å†…
  - MATCH,æ¼ç½‘
  
# é”šç‚¹ - è§„åˆ™å‚æ•° [æ¯12å°æ—¶æ›´æ–°ä¸€æ¬¡è®¢é˜…è§„åˆ™ï¼Œæ›´æ–°è§„åˆ™æ—¶ä½¿ç”¨ä»£ç†]
RuleSet_classical: &RuleSet_classical {type: http, behavior: classical, interval: 86400, format: text, proxy: ä»£ç†}
RuleSet_domain: &RuleSet_domain {type: http, behavior: domain, interval: 86400, format: text, proxy: ä»£ç†}
RuleSet_ipcidr: &RuleSet_ipcidr {type: http, behavior: ipcidr, interval: 86400, format: text, proxy: ä»£ç†}
# è®¢é˜…è§„åˆ™
rule-providers:
  private_proxy:
    !!merge <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/2263075977/daili/refs/heads/main/mihomo/proxy.txt
    path: ./rule/private_proxy.txt
  private_direct:
    !!merge <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/2263075977/daili/refs/heads/main/mihomo/direct.txt
    path: ./rule/private_direct.txt
  speedtest:
    !!merge <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/speedtest.txt
    path: ./rule/speedtest.txt
  cdn_domainset:
    !!merge <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/cdn.txt
    path: ./rule/cdn_domainset.txt
  cdn_non_ip:
    !!merge <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/non_ip/cdn.txt
    path: ./rule/cdn_non_ip.txt
  stream_us_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream_us.txt
    path: ./rule/stream_us_non_ip.txt
  stream_us_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/stream_us.txt
    path: ./rule/stream_us_ip.txt
  stream_eu_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream_eu.txt
    path: ./rule/stream_eu_non_ip.txt
  stream_eu_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/stream_eu.txt
    path: ./rule/stream_eu_ip.txt
  stream_jp_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream_jp.txt
    path: ./rule/stream_jp_non_ip.txt
  stream_jp_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/stream_jp.txt
    path: ./rule/stream_jp_ip.txt
  stream_kr_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream_kr.txt
    path: ./rule/stream_kr_non_ip.txt
  stream_kr_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/stream_kr.txt
    path: ./rule/stream_kr_ip.txt
  stream_hk_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream_hk.txt
    path: ./rule/stream_hk_non_ip.txt
  stream_hk_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/stream_hk.txt
    path: ./rule/stream_hk_ip.txt
  stream_tw_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/stream_tw.txt
    path: ./rule/stream_tw_non_ip.txt
  stream_tw_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/stream_tw.txt
    path: ./rule/stream_tw_ip.txt
  ai_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/ai.txt
    path: ./rule/ai_non_ip.txt
  telegram_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/telegram.txt
    path: ./rule/telegram_non_ip.txt
  telegram_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/telegram.txt
    path: ./rule/telegram_ip.txt
  apple_cdn:
    !!merge <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/apple_cdn.txt
    path: ./rule/apple_cdn.txt
  apple_services:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_services.txt
    path: ./rule/apple_services.txt
  apple_cn_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/apple_cn.txt
    path: ./rule/apple_cn_non_ip.txt
  microsoft_cdn_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft_cdn.txt
    path: ./rule/microsoft_cdn_non_ip.txt
  microsoft_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/microsoft.txt
    path: ./rule/microsoft_non_ip.txt
  # è½¯ä»¶æ›´æ–°ã€æ“ä½œç³»ç»Ÿç­‰å¤§æ–‡ä»¶ä¸‹è½½
  download_domainset:
    !!merge <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/domainset/download.txt
    path: ./rule/download_domainset.txt
  download_non_ip:
    !!merge <<: *RuleSet_domain
    url: https://ruleset.skk.moe/Clash/non_ip/download.txt
    path: ./rule/download_non_ip.txt
  # å†…ç½‘åŸŸåå’Œå±€åŸŸç½‘ IP
  lan_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/lan.txt
    path: ./rule/lan_non_ip.txt
  lan_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/lan.txt
    path: ./rule/lan_ip.txt
  domestic_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/domestic.txt
    path: ./rule/domestic_non_ip.txt
  direct_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/direct.txt
    path: ./rule/direct_non_ip.txt
  global_non_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/non_ip/global.txt
    path: ./rule/global_non_ip.txt
  domestic_ip:
    !!merge <<: *RuleSet_classical
    url: https://ruleset.skk.moe/Clash/ip/domestic.txt
    path: ./rule/domestic_ip.txt
  china_ip:
    !!merge <<: *RuleSet_ipcidr
    url: https://ruleset.skk.moe/Clash/ip/china_ip.txt
    path: ./rule/china_ip.txt
  china_ipv6:
    !!merge <<: *RuleSet_ipcidr
    url: https://ruleset.skk.moe/Clash/ip/china_ip_ipv6.txt
    path: ./rule/china_ipv6.txt
  
